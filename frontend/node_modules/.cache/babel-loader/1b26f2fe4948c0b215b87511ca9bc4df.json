{"ast":null,"code":"import jwt from 'jsonwebtoken';\nimport { SIGN_IN_FAILURE, SIGN_IN_REQUEST, SIGN_IN_SUCCESS, SIGN_UP_FAILURE, SIGN_UP_REQUEST, SIGN_UP_SUCCESS, SIGN_OUT_FAILURE, SIGN_OUT_REQUEST, SIGN_OUT_SUCCESS, FETCH_MOVIES_SUCCESS, FETCH_MOVIES_REQUEST, FETCH_MOVIES_FAILURE } from './action-types';\nexport const isValidToken = token => {\n  let decoded = jwt.decode(token);\n  return new Date(decoded.exp * 1000) > new Date() ? decoded : null;\n};\nconst iniState = {\n  currentUser: localStorage.getItem(\"USER-TOKEN\") ? isValidToken(localStorage.getItem(\"USER-TOKEN\")) : null,\n  token: localStorage.getItem(\"USER-TOKEN\") ? localStorage.getItem(\"USER-TOKEN\") : null,\n  error: \"\",\n  loading: false,\n  isAuthenticated: false,\n  movieData: []\n};\nexport const fetchMoviesReducer = (state = iniState, action) => {\n  switch (action.type) {\n    case FETCH_MOVIES_REQUEST:\n      return { ...state,\n        loading: false\n      };\n\n    case FETCH_MOVIES_SUCCESS:\n      return { ...state,\n        loading: false,\n        error: null,\n        movieData: action.payload.movieData\n      };\n\n    case FETCH_MOVIES_FAILURE:\n      return { ...state,\n        loading: false,\n        error: action.payload.error\n      };\n\n    default:\n      return { ...state\n      };\n  }\n};\nexport const authenticationReducer = (state = iniState, action) => {\n  switch (action.type) {\n    case SIGN_IN_REQUEST:\n    case SIGN_UP_REQUEST:\n    case SIGN_OUT_REQUEST:\n      return { ...state,\n        loading: true,\n        isAuthenticated: false\n      };\n\n    case SIGN_IN_FAILURE:\n    case SIGN_UP_FAILURE:\n    case SIGN_OUT_FAILURE:\n      return { ...state,\n        loading: false,\n        error: action.payload,\n        currentUser: null,\n        isAuthenticated: false\n      };\n\n    case SIGN_UP_SUCCESS:\n    case SIGN_IN_SUCCESS:\n      return { ...state,\n        loading: false,\n        token: action.payload.token,\n        currentUser: action.payload.user,\n        isAuthenticated: true\n      };\n\n    case SIGN_OUT_SUCCESS:\n      localStorage.removeItem(\"USER-TOKEN\");\n      return { ...state,\n        isAuthenticated: false,\n        loading: false,\n        currentUser: null,\n        token: \"\"\n      };\n\n    default:\n      return { ...state\n      };\n  }\n};\nexport default authenticationReducer;","map":{"version":3,"sources":["/Users/chrishar/Documents/CODI/TF961-CODI]/Movie-DB/frontend/src/redux/reducer.js"],"names":["jwt","SIGN_IN_FAILURE","SIGN_IN_REQUEST","SIGN_IN_SUCCESS","SIGN_UP_FAILURE","SIGN_UP_REQUEST","SIGN_UP_SUCCESS","SIGN_OUT_FAILURE","SIGN_OUT_REQUEST","SIGN_OUT_SUCCESS","FETCH_MOVIES_SUCCESS","FETCH_MOVIES_REQUEST","FETCH_MOVIES_FAILURE","isValidToken","token","decoded","decode","Date","exp","iniState","currentUser","localStorage","getItem","error","loading","isAuthenticated","movieData","fetchMoviesReducer","state","action","type","payload","authenticationReducer","user","removeItem"],"mappings":"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","sourcesContent":["import jwt from 'jsonwebtoken';\n\nimport{\n    SIGN_IN_FAILURE,\n    SIGN_IN_REQUEST,\n    SIGN_IN_SUCCESS,\n    SIGN_UP_FAILURE,\n    SIGN_UP_REQUEST,\n    SIGN_UP_SUCCESS,\n    SIGN_OUT_FAILURE,\n    SIGN_OUT_REQUEST,\n    SIGN_OUT_SUCCESS,\n    FETCH_MOVIES_SUCCESS,\n    FETCH_MOVIES_REQUEST,\n    FETCH_MOVIES_FAILURE\n} from './action-types';\n\nexport const isValidToken = (token) =>{\n    let decoded = jwt.decode(token);\n    return new Date(decoded.exp * 1000) > new Date() ? decoded : null;\n};\n\n\n\nconst iniState ={\n    currentUser: localStorage.getItem(\"USER-TOKEN\")\n        ? isValidToken(localStorage.getItem(\"USER-TOKEN\"))\n        : null,\n    token: localStorage.getItem(\"USER-TOKEN\")\n        ? localStorage.getItem(\"USER-TOKEN\")\n        : null,\n    error:\"\",\n    loading: false,\n    isAuthenticated: false,\n    movieData:[],\n};\nexport const fetchMoviesReducer = (state=iniState,action) =>{\n    switch(action.type){\n        case FETCH_MOVIES_REQUEST:\n            return{\n                ...state,\n                loading:false,\n          \n            };\n        case FETCH_MOVIES_SUCCESS:\n            return{\n                ...state,\n                loading:false,\n                error:null,\n                movieData:action.payload.movieData\n            };\n        case FETCH_MOVIES_FAILURE:\n            return{\n                ...state,\n                loading:false,\n                error: action.payload.error\n            };\n            default:\n                return{...state};\n    }\n}\n\n \nexport const authenticationReducer = (state=iniState,action) =>{\n    switch(action.type){\n        case SIGN_IN_REQUEST:\n        case SIGN_UP_REQUEST:\n        case SIGN_OUT_REQUEST:\n            return{\n                ...state,\n                loading: true,\n                isAuthenticated:false,\n            };\n        case SIGN_IN_FAILURE:\n        case SIGN_UP_FAILURE:\n        case SIGN_OUT_FAILURE:\n            return {\n                ...state,\n                loading: false,\n                error: action.payload,\n                currentUser: null,\n                isAuthenticated: false,\n            };\n        case SIGN_UP_SUCCESS:\n        case SIGN_IN_SUCCESS:\n            return{\n                ...state,\n                loading:false,\n                token: action.payload.token,\n                currentUser: action.payload.user,\n                isAuthenticated: true,\n            };\n        case SIGN_OUT_SUCCESS:\n            localStorage.removeItem(\"USER-TOKEN\");\n            return{\n                ...state,\n                isAuthenticated:false,\n                loading:false,\n                currentUser:null,\n                token:\"\",\n            };\n            default:\n                return{...state};\n    }\n};\n\n\n\nexport default authenticationReducer;"]},"metadata":{},"sourceType":"module"}